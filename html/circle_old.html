<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>社群圈子</title>
    <meta content="width=device-width,target-densitydpi=device-dpi, user-scalable=0" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="true" name="HandheldFriendly"/>
    <meta content="yes" name="apple-touch-fullscreen"/>
    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            var version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                var phoneScale = parseInt(window.screen.width) / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <link href="css/style.css" rel="stylesheet">
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>


    <link href="mescroll/mescroll.min.css" rel="stylesheet"></link>
    <style type="text/css">
        .mescroll {
            position: fixed;
            top: 176px;
            bottom: 100px;
            height: auto;
        }

        .mescroll-totop {
            bottom: 140px;
        }
    </style>

</head>
<body>
<div id="circle">
    <div id="menu">
        <div class="star"></div>
        <ul>
            <li onclick="window.location.href='index.html'">推荐</li>
            <li onclick="window.location.href='attention.html'">关注</li>
            <li class="current" onclick="window.location.href='circle.html'">部落</li>
        </ul>
        <a class="seachbt" href="search.html"></a>
    </div>


    <div class="content">
        <ul class="head_title">
            <li class="hover" data-title="All">推荐部落</li>
            <li data-title="MINE">我的部落</li>
        </ul>


        <div class="mescroll" id="mescroll">
            <ul class="circleList recommend " id="dataList">

            </ul>
        </div>

        <!--<ul class="circleList recommend circle1">
            <li>
                <div class="img"><img src="img/index/img.png"></div>
                <div class="circleMsg">
                    <p class="name">圈子名称圈子名称圈子名称圈子名称</p>
                    <div class="detail">
                        <p class="people"><span>999</span>人</p>
                        <p class="number"><span>999</span>帖子</p>
                    </div>
                </div>
            </li>
            <li>
                <div class="img"><img src="img/index/img.png"></div>
                <div class="circleMsg">
                    <p class="name">圈子名称圈子名称圈子名称圈子名称</p>
                    <div class="detail">
                        <p class="people"><span>999</span>人</p>
                        <p class="number"><span>999</span>帖子</p>
                    </div>
                </div>
            </li>
        </ul>
        <ul class="circleList myCircle circle2">
            <li>
                <div class="img"><img src="img/index/img.png"></div>
                <div class="circleMsg">
                    <p class="name">圈子名称圈子名称圈子名称圈子名称</p>
                    <div class="detail">
                        <p class="people"><span>999</span>人</p>
                        <p class="number"><span>999</span>帖子</p>
                    </div>
                </div>
            </li>
            <li>
                <div class="img"><img src="img/index/img.png"></div>
                <div class="circleMsg">
                    <p class="name">圈子名称圈子名称圈子名称圈子名称</p>
                    <div class="detail">
                        <p class="people"><span>999</span>人</p>
                        <p class="number"><span>999</span>帖子</p>
                    </div>
                </div>
            </li>
        </ul>-->


    </div>

    <div id="foot_menu">
        <ul>
            <li class="hover" onclick="window.location.href='index.html'">
                <img src="img/index/ico_menu1_2.png">
                <p>首页</p>
            </li>
            <li onclick="window.location.href='auction.html'">
                <img src="img/index/ico_menu2_1.png">
                <p>拍卖</p>
            </li>
            <li onclick="issue_show()">
                <img src="img/index/ico_menu3_1.png">
                <p>发布</p>
            </li>
            <li onclick="window.location.href='message.html'">
                <img src="img/index/ico_menu4_1.png">
                <p>消息</p>
            </li>
            <li onclick="window.location.href='myHome.html'">
                <img src="img/index/ico_menu5_1.png">
                <p>我的</p>
            </li>
        </ul>
    </div>


    <!--发布选项浮层-->
    <div id="issue_select">
        <div class="white"></div>
        <div class="box">
            <!-- <a href="issue_post.html" class="issue_post"><img src="img/issue/ico1.png"><span>发布帖子</span></a>
            <a href="issue_object.html?id=1" class="issue_product"><img src="img/issue/ico2.png"><span>发布藏品</span></a>
            <a href="issue_object.html?id=2" class="issue_product2"><img src="img/issue/ico3.png"><span>发布拍品</span></a> -->
            <a class="issue_post" onclick="addRecord('POSTS','1')"><img src="img/issue/ico1.png"><span>发布帖子</span></a>
            <!-- <a onclick="addRecord('TREASURE','2')"  class="issue_product"><img src="img/issue/ico2.png"><span>发布藏品</span></a> -->
            <a class="issue_product2" onclick="addRecord('AUCTION','3')"><img src="img/issue/ico3.png"><span>发布商品</span></a>
            <div class="delete" onclick="issue_close()"></div>
        </div>
    </div>

</div>


<script src="js/common.js" type="text/javascript"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>

<!--上拉加载文件-->

<script charset="utf-8" src="mescroll/mescroll.min.js"></script>
<!--获取圈子列表-->
<script type="text/javascript">

    shareMsg(); //分享

    $(".content").css({"min-height": $(window).height() - 185});


    $(".head_title li").click(function () {
        $(".head_title li").removeClass("hover");
        $(this).addClass("hover");
        paramObject.requestType = $(this).data('title');
        mescroll.resetUpScroll();
    });
    var paramObject = getParamObject();
    paramObject.requestType = 'ALL';
    // 创建mescroll对象
    var mescroll = new MeScroll("mescroll", {
        up: {
            callback: upCallback, //上拉回调,此处可简写; 相当于 callback: function (page) { getListData(page); }
            isBounce: false, //此处禁止ios回弹,解析(务必认真阅读,特别是最后一点): http://www.mescroll.com/qa.html#q10
            noMoreSize: 1,
            clearEmptyId: "dataList", //1.下拉刷新时会自动先清空此列表,再加入数据; 2.无任何数据时会在此列表自动提示空

            toTop: { //配置回到顶部按钮
                src: "../res/img/mescroll-totop.png" //默认滚动到1000px显示,可配置offset修改
            }
        }
    });

    //上拉加载的回调 page = {num:1, size:10}; num:当前页 默认从1开始, size:每页数据条数,默认10
    function upCallback(page) {
        paramObject.pageNumber = page.num; // 页码, 默认从1开始 如何修改从0开始 ?
        paramObject.pageSize = page.size; // 页长, 默认每页10条
        paramObject.orderBy = 'horde_name'; // 排序字段：user_num 用户数量 horde_name部落名称
        paramObject.orderMode = 'DESC'; // 排序字段：user_num 用户数量 horde_name部落名称
        paramObject.requestId = md5($.param(paramObject)); // 请求ID
        paramObject.timestamp = new Date().getTime(); // 请求时间戳

        $.ajax({
            url: link + "/manager/horde/getHordeList?" + $.param(paramObject),
            success: function (res) {
                console.log(res);
                handler({
                    res: res,
                    fun1: function () {
                        var curPageData = res.data; // 接口返回的当前页数据列表
                        var totalSize = res.count; // 接口返回的总数据量(比如列表有26个数据,每页10条,共3页; 则totalSize值为26)
                        mescroll.endBySize(curPageData.length, totalSize); // 联网成功的回调,隐藏下拉刷新和上拉加载的状态;
                        setListData(curPageData); // 设置列表数据
                    }
                })
            },
            error: function (e) {
                mescroll.endErr()
            }
        });
    }

    // 设置列表数据
    function setListData(curPageData) {
        var str = "";
        for (var i = 0; i < curPageData.length; i++) {
            var pd = curPageData[i];
            str += '<li onclick="window.location.href=\'hordeDetail.html?hordeId=' + pd.hordeId + '\'">' +
                '<div class="img"><img src="' + link + pd.smallImage + '"></div>' +
                '<div class="circleMsg">' +
                '<p class="name">' + pd.hordeName + '</p>' +
                '<div class="detail">' +
                '<p class="people">成员：<span>' + pd.userNum + '</span></p>' +
                '<p class="number">内容：<span>' + pd.postsNum + '</span></p>' +
                '</div>' +
                '</div>' +
                '</li>'
        }

        $("#dataList").append(str);
        $("#circleSelect li").click(function () {
            let tex = $(this).find(".name").text();
            let groupId = $(this).attr('data-groupId');
            $("#circleSelect").hide();
            $(".addr_select .lable span").text(tex);
            $(".addr_select .lable").attr("data-groupId", groupId)
        })
    }
</script>

<script>
    $("#menu ul li").click(function () {
        $("#menu ul li").removeClass("current");
        $(this).addClass("current");
    });

</script>
</body>
</html>