<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>拍品详情</title>
    <meta content="width=device-width,target-densitydpi=device-dpi, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="true" name="HandheldFriendly">
    <meta content="yes" name="apple-touch-fullscreen">
    <link href="css/style.css" rel="stylesheet">
    <link href="city/city.css" rel="stylesheet">

    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <style type="text/css">
        .swiper-wrapper {
            height: 506px;
        }

        .swiper-container {
            overflow: hidden;
        }
    </style>

    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            let version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                let phoneScale = window.screen.width / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' +
                    phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="js/pinchzoom.js" type="text/javascript"></script>
</head>

<body>
<div id="productDetail">

    <!--轮播模块-->
    <div class="swiper-container" id="banner">
        <ul class="swiper-wrapper" style="max-height:506px;">
            <!--<li class="swiper-slide"><img src="img/detail/product_big.jpg" alt=""></li>
            <li class="swiper-slide"><img src="img/detail/product_big.jpg" alt=""></li>
            <li class="swiper-slide"><img src="img/detail/product_big.jpg" alt=""></li>
            <li class="swiper-slide"><img src="img/detail/product_big.jpg" alt=""></li>-->
        </ul>

        <div class="time_message">
            <div class="price">￥<span>0 </span> <i>当前价</i></div>
            <div class="time_box">
                <p class="txt">距离结束</p>
                <div class="time">
                    <p class="normal">
                        <span class="data">0 </span>天
                        <span class="hour">0 </span>时
                        <span class="min">0 </span>分
                        <span class="sec">0 </span>秒
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div id="content">
        <div class="detailMsg">
            <div class="bidMsg">
                <p>出价次数<span>0</span> 次</p>
            </div>
            <p class="productName"></p>
            <ul class="lable"></ul>
            <table id="form">
                <tr>
                    <td>Header</td>
                </tr>
            </table>
        </div>

        <div class="line"></div>

        <div class="useMsg">
            <div class="message">
                <div class="head">
                    <img alt="" class="imgwidth" src="img/detail/head_img.png">
                </div>
                <div class="use_box">
                    <p class="name"></p>
                    <div class="evaluateMsg">
                        <p class="evaluateNum">评价 <span></span></p>
                        <p class="general">好评率 <span></span>%</p>
                    </div>
                </div>
                <div class="zan">关注</div>
            </div>

            <div class="number_box">

            </div>
        </div>

        <div class="line"></div>

        <div class="consult">
            <div class="title">
                <p>卖家答疑（<span>0</span>）</p>
            </div>
            <ul>

            </ul>
        </div>

        <div class="line"></div>

        <div class="recommend">
            <p class="title">猜你种草</p>
            <ul>
                <!--<li>
            <img src="img/detail/img.png" />
            <p class="name">正品保障</p>
            <p class="price">￥<span>999</span></p>
        </li>-->
            </ul>
        </div>

        <div class="line"></div>

        <div class="productData">
            <ul class="nav_title">
                <li class="current">图文详情</li>
                <li>出价记录</li>
            </ul>
            <div class="part1 part">
                <ol class="basicMsg">
                    <h1>基本信息</h1>
                    <li>
                        <p>分类</p><span></span>
                    </li>
                </ol>
                <div class="img">
                    <h1>图片信息</h1>
                    <img alt="" src="">
                </div>
            </div>
            <div class="part2 part">

            </div>
        </div>

    </div>

    <div id="foot_button">
        <ul>

            <li class="homebt" onclick="location.href = 'auction.html';">
                <img alt="" src="img/detail/home_ico.png">
                <p>拍卖</p>
            </li>
            <li class="zanbt" onclick="plantGrass();">
                <img alt="" src="img/detail/normal_3.png">
                <p>种草</p>
            </li>
            <li class="buybt">
                <button class="makePrice" onclick="showPriceBox('.makePrice_box');">预约出价</button>
                <button class="oncePrice" onclick="showPriceBox('.oncePrice_box')">立即出价</button>
            </li>
        </ul>
    </div>

    <div id="foot_button2">
        <ul>
            <li class="homebt" onclick="window.location.href='auction.html'">
                <img alt="" src="img/detail/home_ico.png">
                <p class="text">拍卖</p>
            </li>
            <li class="questionIco">
                <img alt="" src="img/detail/question_ico.png">
                <p class="text">提问</p>
                <p class="num" style="display: none;">1</p>
            </li>

            <li class="buybt">
                <button class="closeAuction makePrice" onclick="updateAuctionStatus('CANCEL');">取消拍卖</button>
                <button class="endAuction oncePrice" onclick="updateAuctionStatus('END');">结束拍卖</button>
            </li>
        </ul>
    </div>

    <div id="suspend_buttom">
        <div class="backTop" onclick="backTop()" style="display: none;">
            <img alt="" src="img/detail/backtop.png">
        </div>
        <div class="morebt" onclick="more()">
            <img alt="" src="img/detail/morebt.png">
        </div>
    </div>

    <!--地址填写框-->
    <div class="addressWicket">
        <div class="click" onclick="podlock()"></div>
        <div class="box">
            <div class="titleState">
                <p class="title">保证金<span>￥0</span></p>
                <p class="state">保证金会在拍卖结束或完成付款后退回</p>
            </div>
            <div class="addressDetail" style="display: none;">
                <p class="title">收货地址</p>
                <input class="realname" maxlength="15" name="" placeholder="收货人姓名" value=""/>
                <input class="mobile" maxlength="11" name="" placeholder="手机号码" value=""/>
                <div class="addSelect">

                    <!--<p class="left tex">：</p>-->
                    <!--<div class="right">-->
                    <input class="right" id="address" maxlength="30" placeholder="所在地区" style="margin:0"
                           type="text">
                    <!--</div>-->
                    <!--<select name="province" class="province" id="province_select"></select>
            <select name="city" class="city" id="city_select"></select>-->
                </div>
                <input class="addr" maxlength="100" placeholder="详细地址" type="text"/>
            </div>
            <div class="deal">
                <div class="select_box hover" onclick="consent(this);">
                    <div class="select"></div>
                </div>
                本人同意并接受
                <a href="set_agreement.html">《拍卖协议》</a>
            </div>
            <button class="submitbt" onclick="submitAddress()">支付保证金</button>
        </div>
    </div>

    <!--预约出价-->
    <div class="makePrice_box">
        <div class="click" onclick="podlock()"></div>
        <div class="box">
            <p class="presentPrice">当前价格￥<span>0</span></p>
            <div class="selectPrice">
                <div class="reduce" onclick="priceReduction('.makePrice_box');">
                    <img alt="" src="img/detail/reduce2.png">
                </div>
                <p class="range">
                    <!-- <label>￥</label> -->
                    <input class="price" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                           onkeyup="this.value=this.value.replace(/\D/g,'')"
                           type="number">
                </p>
                <div class="add" onclick="priceMarkup('.makePrice_box');">
                    <img alt="" src="img/detail/add.png">
                </div>
            </div>
            <div class="addCost">
                <div class="state">
                    <p class="text">附加运费、税费及手续费</p>
                    <p class="number">￥<span>0</span></p>
                </div>
            </div>
            <button class="submitbt" onclick="submitPrice('RESERVATION');">预约出价</button>
        </div>
    </div>

    <!--立即出价-->
    <div class="oncePrice_box">
        <div class="click" onclick="podlock()"></div>
        <div class="box">
            <p class="presentPrice">当前价格 ￥<span>0</span></p>
            <div class="selectPrice">
                <div class="reduce" onclick="priceReduction('.oncePrice_box');">
                    <img alt="" src="img/detail/reduce2.png">
                </div>
                <p class="range">
                    <!-- <label>￥</label> -->
                    <input class="price" onafterpaste="this.value=this.value.replace(/\D/g,'')"
                           onkeyup="this.value=this.value.replace(/\D/g,'')"
                           type="number">
                </p>
                <div class="add" onclick="priceMarkup('.oncePrice_box');">
                    <img alt="" src="img/detail/add.png">
                </div>
            </div>
            <div class="addCost">
                <div class="state">
                    <p class="text">附加运费、税费及手续费</p>
                    <p class="number">￥<span>0</span></p>
                </div>
                <!-- <input maxlength="10" type="text" class="txt" placeholder="说点什么"/> -->
            </div>

            <div class="bt_box">
                <button class="promptly" onclick="submitPrice('PROMPTLY');"> ￥<span></span> 立即成交</button>
                <button class="submitbt" onclick="submitPrice('IMMEDIATE');">立即出价</button>
            </div>
        </div>
    </div>

    <!--提示框-->
    <div id="text_box">
        <div class="click"></div>
        <div class="text">
            <p class="title">种草成功</p>
            <p class="txt">您可以在我的拍卖中查看已收藏的拍品</p>
            <div class="closebt">我知道了</div>
        </div>
    </div>

    <!--确认提示框-->
    <div class="hint_box2">
        <div class="click"></div>
        <div class="box">
            <p class="title"></p>
            <p class="text">您的出价已经达到一口价，是否确认以[]元成交？</p>
            <div class="bt">
                <button onclick="closeHint();">再想想</button>
                <button class="affirm" onclick="ajaxBidding();">确认出价</button>
            </div>
        </div>
    </div>

    <!--取消关注提示框-->
    <div class="hint_box3" style="display: none;">
        <div class="click"></div>
        <div class="box">
            <!--<p class="title">您是否已收到货品？</p>-->
            <p class="text">确定要取消关注 <span></span>吗？</p>
            <div class="bt">
                <button class="close" onclick="$('.hint_box3').fadeOut(200);">手滑了</button>
                <button class="affirm" onclick="followSeller(1);">取消关注</button>
            </div>
        </div>
    </div>

    <!--更多浮层-->
    <div id="more_box">
        <div class="click"></div>
        <div class="more">
            <ul>
                <p class="title">快速跳转</p>
                <li onclick="window.location.href='index.html'">
                    <div class="img"><img alt="" src="img/more/home.png"></div>
                    <p>首页</p>
                </li>
                <li class="linkmsg" onclick="privateLetterTA()">
                    <div class="img"><img alt="" src="img/more/message.png"></div>
                    <p>消息</p>
                </li>
                <li>
                    <div class="img"><img alt="" src="img/more/Report.png"></div>
                    <p>举报</p>
                </li>
            </ul>
            <!-- <ul>
                <p class="title">内容管理</p>
                <li>
                    <div class="img"><img src="img/more/conversion.png" alt=""></div>
                    <p>转为拍品</p>
                </li>
                <li>
                    <div class="img"><img src="img/more/editor.png" alt=""></div>
                    <p>编辑</p>
                </li>
                <li>
                    <div class="img"><img src="img/more/delete.png" alt=""></div>
                    <p>删除</p>
                </li>
                <li>
                    <div class="img"><img src="img/more/hidden.png" alt=""></div>
                    <p>隐藏</p>
                </li>
            </ul> -->
            <ul>
                <p class="title">分享给朋友</p>
                <li>
                    <div class="img"><img alt="" src="img/more/wechat.png"></div>
                    <p>微信</p>
                </li>
                <li>
                    <div class="img"><img alt="" src="img/more/friends.png"></div>
                    <p>朋友圈</p>
                </li>
                <li>
                    <div class="img"><img alt="" src="img/more/qq.png"></div>
                    <p>QQ</p>
                </li>
                <li>
                    <div class="img"><img alt="" src="img/more/weibo.png"></div>
                    <p>微博</p>
                </li>
            </ul>
        </div>
    </div>

    <!--确认支付框-->
    <div class="payment_box">
        <div class="click"></div>
        <div class="box">
            <div class="title_box">
                <p class="text">需要支付</p>
                <p class="money">￥<span>0</span></p>
            </div>
            <div class="payment">
                <!--<p class="time">剩余支付时间：<span>14分52秒</span></p>-->
                <ul class="paymentSelect">
                    <li class="hover">
                        <p><img alt="" src="img/order/zfb.png"> 支付宝支付</p>
                    </li>
                    <li>
                        <p><img alt="" src="img/order/wx.png"> 微信支付</p>
                    </li>
                </ul>
            </div>
            <div class="paymentbt">
                <button class="zfb submitbt" onclick="payment('Alipay')">确认支付</button>
                <button class="wx submitbt" onclick="payment('WeChat')" style="display: none;">确认支付</button>
            </div>
        </div>
    </div>

    <div class="hint_box">
        <p></p>
    </div>

    <section id="mymodal">
        <div class="modal-main">
            <p class="address-title">收货地址</p>
            <!--<p class="close">x</p>-->
            <ul class="optionwrapper">
                <li class="option-menu option-menu-one active-option">请选择</li>
                <li class="option-menu option-menu-two"></li>
                <li class="option-menu option-menu-three"></li>
            </ul>
            <div class="option-content">
                <ul class="option-group option-group-one" data-index="0" style="display: block">
                </ul>
                <ul class="option-group option-group-two" data-index="1">
                </ul>
                <ul class="option-group option-group-three" data-index="2">
                </ul>
            </div>
        </div>
    </section>


    <div id="share_box"><img class="share" src="img/share_img.png"></div>

</div>
<script src="js/jquery.cookie.js" type="text/javascript"></script>

<script src="js/common.js"></script>
<script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>

<script src="city/data.js" type="text/javascript"></script>

<!--滑动-->
<link href="css/swiper.min.css" rel="stylesheet">
<script src="js/swiper.min.js"></script>

<script type="text/javascript">


    let provinceName = "";
    let cityName = '';
    let areaName = '';
    var usernames = '';
    $(document).ready(function () {
        let newData = []; //新数据
        let citysArray = []; //城市
        let areaArray = []; //地区
        let chooseMenuStr = '请选择';//添加选择title
        function init() {
            //模拟ajax
            setTimeout(() = > {
                newData = [...data;
        ]
            // 初始化省份
            let optionGroupOne = "";
            $.each(newData, function (index, el) {
                optionGroupOne +=
                    `<li class="option-list option-list-one">
								<span>${newData[index]["n"]}</span>
								<div class="checked">
								</div>
							</li>`
            });

            $(".option-group-one").html(optionGroupOne)

        },
            100;
        )
        }

        init();


        $("#mymodal").on("click", ".option-menu", function () { //菜单激活
            var i = $(this).index();
            $(this).addClass('active-option').siblings().removeClass('active-option');
            $(".option-group").eq(i).show().siblings().hide()
        });

        //1级 省份点击添加城市
        $("#mymodal").on("click", ".option-list-one", function () {
            var parentIndex = $(this).parent().attr("data-index");
            provinceName = $(this).text().trim();
            console.log(provinceName);
            var provinceIndex = $(this).index();
            $(this).find('.checked').show();
            $(this).siblings().find('.checked').hide();
            $(this).find('span').css({'color': '#ffac1c'});
            $(this).siblings().find('span').css({'color': '#1c2027'});
            // console.log(newData[provinceIndex])
            citysArray = newData[provinceIndex]["c"];
            $(".option-menu").eq(parentIndex).text(provinceName);
            var cityStr = "";
            // console.log(citysArray)
            $.each(citysArray, function (index, el) {
                cityStr +=
                    `<li class="option-list option-list-two">
								<span>${citysArray[index]["n"]}</span>
								<div class="checked">
								</div>
							</li>`
            });
            // console.log(cityStr)
            $(".option-group").hide();
            $(".optionwrapper").find(".option-menu").removeClass('active-option');
            $(".option-menu-two").html(chooseMenuStr).addClass('active-option');
            $(".option-group-two").html(cityStr).show();
            $(".option-group-three").html("");
            $(".option-menu-three").html("")
        });


        //2级 城市点击添加城镇
        $("#mymodal").on("click", ".option-list-two", function () {
            let parentIndex = $(this).parent().attr("data-index");
            cityName = $(this).text().trim();
            let cityIndex = $(this).index();
            $(this).find('.checked').show();
            $(this).siblings().find('.checked').hide();
            $(this).find('span').css({'color': '#ffac1c'});
            $(this).siblings().find('span').css({'color': '#1c2027'});
            cityArray = citysArray[cityIndex]["a"];
            $(".option-menu").eq(parentIndex).text(cityName);
            let areaStr = "";
            $.each(cityArray, function (index, el) {
                areaStr +=
                    `<li class="option-list option-list-three">
								<span>${cityArray[index]}</span>
								<div class="checked">
								</div>
							</li>`
            });
            $(".option-group").hide();
            $(".optionwrapper").find(".option-menu").removeClass('active-option');
            $(".option-menu-three").html(chooseMenuStr).addClass('active-option');
            $(".option-group-three").html(areaStr).show();
        });
        //3级 选择城镇
        $("#mymodal").on("click", ".option-list-three", function () {
            areaName = $(this).text().trim();
            let parentIndex = $(this).parent().attr("data-index");
            let menuOne = $(".option-menu").eq(0).text();
            let menuTwo = $(".option-menu").eq(1).text();
            let addressVal = menuOne + " " + menuTwo + " " + areaName;
            $(this).find('.checked').show();
            $(this).siblings().find('.checked').hide();
            $(this).find('span').css({'color': '#ffac1c'});
            $(this).siblings().find('span').css({'color': '#1c2027'});
            $(".option-menu").eq(parentIndex).text(areaName);
            $(".modal-main").animate({
                "bottom": "-900px"
            }, 200);
            setTimeout(() = > {
                $("#mymodal";
        ).
            fadeOut()
        },
            150;
        )
            $("#address").val(addressVal)


            /*setTimeout(()=>{
        $("#mymodal").fadeOut()
    },150)
    $("#address").val(addressVal)*/
        });

        $(".right").on("click", function () {
            $("#mymodal").show();
            $(".modal-main").animate({
                "bottom": "0"
            }, 200)
        });


        $(".close").on("click", function () {
            $(".modal-main").animate({
                "bottom": "-900px"
            }, 200);
            setTimeout(() = > {
                $("#mymodal";
        ).
            fadeOut();
        },
            150;
        )
        });

        $("#mymodal").on("click", function (event) {
            let modalMain = $(".modal-main");
            if (!modalMain.is(event.target) && modalMain.has(event.target).length === 0) {
                $(".modal-main").animate({
                    "bottom": "-900px"
                }, 200);
                setTimeout(() = > {
                    $("#mymodal";
            ).
                fadeOut();
            },
                150;
            )
            }

        })

    });
</script>


<script type="text/javascript">
    const productId = getQueryStringByName("productId");
    let auctionData;
    let selleData;
    var earnestMoney = '';
    let biddingData = {
        auctionId: productId
    };

    // 添加足迹
    addFootprints();
    // 获取拍品详情
    getAuctionDetails(true);
    // 获取提问列表
    getQuestionList();
    // 获取推荐列表
    getRecommendList();
    // 获取出价记录
    getBiddingRecords();

    /**
     * 添加足迹
     */
    function addFootprints() {
        $.ajax({
            url: link + '/goods/footprints',
            type: 'POST',
            data: {
                requestId: md5(productId),
                timestamp: new Date().getTime(),
                auctionId: productId,
            }
        }).done(function (response) {
            console.log(response)
        });
    }

    /**
     * 获取拍品详情
     */
    function getAuctionDetails(initialize) {
        $.ajax({
            url: link + '/goods/auctions/' + productId,
            type: 'GET',
            data: {
                requestId: md5(productId),
                timestamp: new Date().getTime(),
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    auctionData = response.data;
                    $('title').text(auctionData.title.substring(0, 10));
                    let shareTitle, shareDese, shareImg;
                    shareTitle = auctionData.title;
                    shareDese = delHtmlTag(auctionData.introduce);
                    console.log(shareDese);
                    if (Istrue(auctionData.images)) {
                        var imgArr = auctionData.images.split(";");
                        console.log(imgArr);
                        shareImg = 'http://www.2501p.com/api' + imgArr[0];
                    }

                    shareMsg(shareTitle, shareDese, shareImg);

                    // 设置轮播图
                    setSwiperWrapper();

                    // 设置时间消息
                    setTimeMessage();

                    // 设置拍品信息
                    setDetailMsg();

                    // 设置图文详情
                    setDetailData();

                    // 设置拍品数据
                    setAuctionData(initialize);
                }
            })
        });
    }

    /**
     * 设置轮播图
     */
    function setSwiperWrapper() {
        let wrapperHTML = '';
        // 拍品图片
        let images = auctionData.images;
        // 检查拍品图片是否存在
        if (images === undefined) {
            wrapperHTML = '<li class="swiper-slide"><video src="' + link + auctionData.video + '" height="506" controls preload poster="img/product_big.jpg"></video></li>';
        } else {
            var imgArr = images.split(";"); //原图list数组
            for (let i = 0; i < imgArr.length; i++) {
                var imgList = imgArr[i].split('.');
                // wrapperHTML += '<li class="swiper-slide"><img src="' + link + imageArray[i] + '" alt=""></li>';
                wrapperHTML += '<li class="swiper-slide"><img src="' + link + imgList[0] + '-thumbnail.' + imgList[1] + '" onerror="src=\'img/img_default.png\'"></li>';
            }
        }
        $(".swiper-wrapper").html(wrapperHTML);

        // 检查是否有多张图片
        if (images !== undefined && images.indexOf(';') >= 0) {
            // 设置图片轮播
            new Swiper('.swiper-container', {
                slidesPerView: 1,
                spaceBetween: 10,
                loop: true,
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: false,
                },
            });
        }
    }

    /**
     * 设置时间消息
     */
    function setTimeMessage() {
        // 当前价格
        let currentPrice = auctionData['currentPrice'];
        $(".time_message .price span").text(currentPrice);
        $(".makePrice_box .presentPrice span").text(currentPrice);
        $(".oncePrice_box .presentPrice span").text(currentPrice);


        let date = auctionData.startTime;
        console.log(date);
        date = date.substring(0, 19);
        console.log(date);
        date = date.replace(/-/g, '/');
        // 当前时间戳
        let curTimestamp = new Date().getTime();
        // 结束时间戳
        let endTimestamp = auctionData['endTimestamp'];
        // 开始时间戳
        let startTimestamp = new Date(date).getTime();

        console.log(curTimestamp, startTimestamp);
        // 拍品状态
        let auctionStatus = auctionData.auctionStatus;
        var asdfa = "123456";
        var ffff = parseInt(asdfa);
        console.log("a:" + typeof (curTimestamp));
        console.log("b:" + typeof (endTimestamp));
        console.log("c:" + typeof (startTimestamp));
        console.log("d:" + typeof (asdfa));
        console.log("f:" + typeof (ffff));
        // 检查拍卖是否正在进行
        if ('RELEASE' === auctionStatus && endTimestamp > curTimestamp) {
            // 检查拍卖是否已经开始
            if (curTimestamp > startTimestamp) {
                // 计算剩余时间
                countDown(endTimestamp - curTimestamp);
            } else {
                countDown(startTimestamp - curTimestamp);
                $(".time_box .txt").text('距离开始还剩');

                if (auctionData['seller'] === false) {
                    $(".buybt .oncePrice").attr('disabled', "disabled");
                    $(".buybt .oncePrice").addClass("hover");

                    $(".buybt .makePrice").attr('disabled', "disabled");
                    $(".buybt .makePrice").addClass("hover");
                } else {
                    $('.endAuction').css('display', 'none');
                    $('.closeAuction').css('width', '480px');
                }
            }
        } else {
            $(".time_message").addClass("hover");
            $(".time_message .txt").addClass("opacit");

            if ('CANCEL' === auctionStatus) {
                $(".time_box .normal").html("已取消");
                $(".buybt ").html("拍卖已取消");
            } else {
                $(".time_box .normal").html("已结束");
                $(".buybt ").html("拍卖已结束");
            }
        }
    }

    /**
     * 设置拍品信息
     */
    function setDetailMsg() {
        let msgHTML = '';

        // 出价信息
        msgHTML += '<div class="bidMsg"><p>出价次数<span>' + auctionData['biddingNumber'] + '</span> 次</p><a href="bidDetail.html?productId=' + productId + '">出价记录 &gt;</a></div>';

        // 拍品标题
        msgHTML += '<p class="productName">' + auctionData.title + '</p>';

        // 拍品标签
        msgHTML += '<ul class="lable">';
        let tagArray = auctionData['tagArray'];
        /* for (let i = 0; i < tagArray.length; i++) {
            msgHTML += '<li>#' + tagArray[i] + '</li>';
        } */

        msgHTML += '</ul>';

        msgHTML += '<table id="form">';

        // 拍品ID
        msgHTML += '<tr><td>ID</td><td>' + productId + '</td></tr>';

        // 当前中标人
        if (auctionData.username === undefined) {
            msgHTML += '<tr><td>当前中标</td><td>无</td></tr>';
        } else if (auctionData['buyerId'] === auctionData.sellerId) {
            msgHTML += '<tr><td>当前中标</td><td>未达到保底价</td></tr>';
        } else {
            msgHTML += '<tr><td>当前中标</td><td>' + userName(auctionData.username) + '（<span style="font-size:22px;color:#afafaf">评价数' + auctionData['totalNumber'] + '</span>）</td></tr>';
        }

        // 开始时间
        msgHTML += '<tr><td>开始时间</td><td>' + auctionData.startTime + '</td></tr>';

        // 开始价格
        msgHTML += '<tr><td>开始价格</td><td><span style="font-size:20px;">￥</span>' + auctionData.startPrice + '</td></tr>';

        // 加价幅度
        msgHTML += '<tr><td>加价幅度</td><td><span style="font-size:20px;">￥</span>' + auctionData.markupRange + '</td></tr>';

        // 一口价
        if (auctionData.buyoutPrice === undefined) {
            msgHTML += '<tr><td>一口价</td><td>无</td></tr>';
        } else {
            msgHTML += '<tr><td>一口价</td><td><span style="font-size:20px;">￥</span>' + auctionData.buyoutPrice + '</td></tr>';
        }

        // 是否提前结束
        msgHTML += '<tr><td>提前结束</td><td>' + (auctionData.endedPrematurely ? '是' : '否') + '</td></tr>';

        // 是否自动延长
        msgHTML += '<tr><td>自动延长</td><td>' + (auctionData.automaticDelay ? '是' : '否') + '</td></tr>';

        // 好评限制
        let praiseLimit = auctionData.praiseLimit;
        if ('ALL' === praiseLimit) {
            msgHTML += '<tr><td>好评限制</td><td>允许所有用户出价</td></tr>';
        } else if ('HIGH_PRAISE' === praiseLimit) {
            msgHTML += '<tr><td>好评限制</td><td>仅允许高好评用户出价</td></tr>';
        } else if ('MID_HIGH_PRAISE' === praiseLimit) {
            msgHTML += '<tr><td>好评限制</td><td>仅允许中高好评用户出价</td></tr>';
        }

        // 交易模式
        let tradingMode = auctionData.tradingMode;
        let textRemark = auctionData.textRemark;
        if ('EXPRESS' === tradingMode) {
            msgHTML += '<tr><td>交易模式</td><td>快递配送' + (textRemark ? '<br><span>（' + textRemark + '）</span>' : '') + '</td></tr>';
        } else if ('FACE_TO_FACE' === tradingMode) {
            msgHTML += '<tr><td>交易模式</td><td>当面交付' + (textRemark ? '<br><span>（' + textRemark + '）</span>' : '') + '</td></tr>';
        } else {
            msgHTML += '<tr><td>交易模式</td><td>快递配送、当面交付' + (textRemark ? '<br><span>（' + textRemark + '）</span>' : '') + '</td></tr>';
        }

        // 发货地
        let placeOfDelivery = auctionData.placeOfDelivery;
        if (placeOfDelivery === undefined) {
            msgHTML += '<tr><td>发货地</td><td>无</td></tr>';
        } else {
            msgHTML += '<tr><td>发货地</td><td>' + placeOfDelivery + '</td></tr>';
        }

        // 保底价
        msgHTML += '<tr><td>保底价格</td><td>' + (auctionData.bottomPrice ? '有' : '无') + '</td></tr>';

        msgHTML += '</table>';

        $('.detailMsg').html(msgHTML);
    }

    /**
     * 设置图文详情
     */
    function setDetailData() {
        let dataHTML = '<ol class="basicMsg"><h1>基本信息</h1>';

        // 分类名称
        dataHTML += '<li><p>分类</p><span>' + auctionData.cateName + '</span></li><li>';

        // 保持情况
        if ('BRAND_NEW' === auctionData.preservation) {
            dataHTML += '<li><p>保存情况</p><span>全新</span></li><li>';
        } else if ('SECOND_HAND' === auctionData.preservation) {
            dataHTML += '<li><p>保存情况</p><span>二手</span></li><li>';
        }

        // 话题
        if (auctionData.themeId) {

        } else {
            dataHTML += '<li><p>话题</p><span>无</span></li><li>';
        }

        // 自定义
        let paramArray = auctionData['paramArray'];
        if (undefined !== paramArray) {
            for (let i = 0; i < paramArray.length; i++) {
                dataHTML += '<li><p>' + paramArray[i].name + '</p><span>' + paramArray[i].value + '</span></li><li>';
            }
        }

        dataHTML += '</ol><div class="img"><h1>图文信息</h1>';

        // 拍品介绍
        dataHTML += '<p class="introduce">' + auctionData.introduce + '</p>';

        // 拍品视频
        let video = auctionData.video;
        if (undefined !== video) {
            dataHTML += '<video src="' + link + video + '" controls preload></video>';
        }

        // 拍品图片
        let images = auctionData.images;
        if (undefined !== images) {
            let imageArray = images.split(';');
            for (let i = 0; i < imageArray.length; i++) {
                var imgList = imageArray[i].split('.');
                // wrapperHTML += '<li class="swiper-slide"><img src="' + link + imageArray[i] + '" alt=""></li>';
                dataHTML += '<img onclick="img_big(\'' + imageArray[i] + '\')" src="' + link + imgList[0] + '-thumbnail.' + imgList[1] + '" alt="">';
            }
        }

        $('.productData .part1').html(dataHTML);
        /* if ($(".productData .part1").height() > $(".productData .part2").height()) {
            $(".productData").css({'height': $(".productData .part1").height() + 150})
        } else {
            $(".productData").css({'height': $(".productData .part2").height() + 150})
        } */
    }

    /**
     * 设置拍品数据
     */
    function setAuctionData(initialize) {
        // 一口价
        earnestMoney = auctionData.earnestMoney;
        if (Istrue(auctionData.buyoutPrice)) {
            $(".oncePrice_box .promptly span").text(auctionData.buyoutPrice);
        } else {
            $(".oncePrice_box .bt_box").addClass("current");
            $(".oncePrice_box .promptly").hide();
        }

        // 保证金
        $(".addressWicket .titleState .title span").html('￥' + auctionData.earnestMoney);
        $(".payment_box .title_box .money span").html(auctionData.earnestMoney);

        // 计算显示价格
        let currentPrice = auctionData['currentPrice'];
        let priceWave = [
            [1, 50, 1],
            [51, 500, 5],
            [501, 1000, 10],
            [1001, 5000, 20],
            [5001, 10000, 50],
            [10001, Number.MAX_VALUE, 100]
        ];
        for (let i = 0; i < priceWave.length; i++) {
            if (currentPrice >= priceWave[i][0] && currentPrice <= priceWave[i][1]) {
                let rangePrice = Math.max(auctionData.markupRange, priceWave[i][2]);

                $('.makePrice_box .range input').val(currentPrice + rangePrice);
                $('.oncePrice_box .range input').val(currentPrice + rangePrice);

                if (rangePrice > auctionData.markupRange) {
                    $('.makePrice_box .reduce').html('<img src="img/detail/reduce.png" alt="">');
                    $('.oncePrice_box .reduce').html('<img src="img/detail/reduce.png" alt="">');
                }
            }
        }

        // 是否为卖家
        if (auctionData['seller'] === true) {
            $("#foot_button").hide();
            $(".linkmsg").hide();
            // 是否可以取消拍卖
            if (auctionData['biddingNumber'] > 0) {
                $(".closeAuction").removeClass("makePrice");
                $(".closeAuction").attr("disabled", "disabled");
            }
            // 是否可以提前结束
            if (auctionData.endedPrematurely === false) {
                $(".endAuction").removeClass("oncePrice");
                $(".endAuction").attr("disabled", "disabled")
            }

            // 隐藏卖家信息
            $(".useMsg").hide();
            $(".useMsg").next().hide();

            // 首先显示出价记录
            $(".nav_title li").removeClass("current");
            $(".nav_title li:nth-child(2)").addClass("current");
            $(".productData .part").hide();
            $(".productData .part2").show();

            // 未回复的提问数量
            let questionNumber = auctionData['questionNumber'];
            if (questionNumber > 0) {
                $(".questionIco .num").text(questionNumber);
                $(".questionIco .num").show();
            }
        } else {
            $("#foot_button2").hide();

            // 是否初始化
            if (initialize === true) {
                // 获取卖家信息
                getSellerInfo(auctionData.sellerId);

                // 首先显示图文详情
                $(".productData .part").hide();
                $(".productData .part1").show();
            }

            // 是否种草
            if (auctionData['plantGrass'] === true) {
                $('.zanbt').html('<img src="img/detail/normal_4.png" alt=""><p style="color: #ff0000;">已种草</p>');
            }
        }

        $.cookie("seller", auctionData['seller'], {
            expires: 365
        });
    }

    /**
     * 获取卖家信息
     */
    function getSellerInfo() {
        $.ajax({
            url: link + '/rating/sellers/' + auctionData.sellerId,
            type: 'GET',
            data: {
                requestId: md5(auctionData.sellerId),
                timestamp: new Date().getTime(),
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    selleData = response.data;

                    // 设置卖家信息
                    setUseMsg();
                }
            })
        });
    }

    /**
     * 设置卖家信息
     */
    function setUseMsg() {
        let sellerId = selleData.sellerId;
        let plantGrass = selleData['plantGrass'];

        let useMsgHTML = '';
        useMsgHTML += '<div class="message">';
        useMsgHTML += '    <div class="head" onclick="location.href = \'useEvaluate.html?sellerID=' + sellerId + '\';">' + headImgHtml(selleData.avatarPath) + '</div>';
        useMsgHTML += '    <div class="use_box" onclick="location.href = \'useEvaluate.html?sellerID=' + sellerId + '\';">';
        useMsgHTML += '        <p class="name">' + userName(selleData.username) + '</p>';
        useMsgHTML += '        <div class="evaluateMsg">';
        useMsgHTML += '            <p class="evaluateNum">评价 <span>' + selleData['totalNumber'] + '</span></p>';
        useMsgHTML += '            <p class="general">好评率 <span>' + selleData['praiseRate'] + '</span>%</p>';
        useMsgHTML += '        </div>';
        useMsgHTML += '     </div>';
        useMsgHTML += '     <div class="zan ' + (plantGrass ? 'hover' : '') + '" data-follow="' + plantGrass + '" onclick="followSeller(0);">' + (plantGrass ? '已关注' : '关注') + '</div>';
        useMsgHTML += '</div>';
        useMsgHTML += '<div class="number_box">';
        useMsgHTML += '    <a class="checkMore" href="productList.html?sellerId=' + sellerId + '">查看Ta的全部拍品</a>';
        useMsgHTML += '</div>';
        userId = selleData.sellerId;
        usernames = selleData.username;
        $('.useMsg').html(useMsgHTML);
    }

    /**
     * 种草
     */
    function plantGrass() {
        $.ajax({
            url: link + '/goods/collects',
            type: 'POST',
            data: {
                requestId: md5(productId),
                timestamp: new Date().getTime(),
                auctionId: productId
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {

                    if (response.data === false) {
                        $('.zanbt').html('<img src="img/detail/normal_3.png" alt=""><p>种草</p>');
                    } else {
                        hint('种草成功');
                        $('.zanbt').html('<img src="img/detail/normal_4.png" alt=""><p style="color: #ff0000;">已种草</p>');
                    }
                }
            });
        });
    }

    /**
     * 关注卖家
     * @param priority 优先级
     */
    function followSeller(priority) {
        let follow = $('.useMsg .zan').hasClass('hover');
        if (true === follow && 0 === priority) {
            $(".hint_box3 .text span").text(selleData.username);
            $(".hint_box3").fadeIn(200);
            return;
        }

        $.ajax({
            url: link + '/social/follow/plantGrassOrCancel',
            type: 'POST',
            data: {
                requestId: md5(auctionData.sellerId),
                timestamp: new Date().getTime(),
                sellerId: auctionData.sellerId
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    $(".hint_box3").fadeOut(200);

                    if (response.data === false) {
                        $('.useMsg .zan').html('关注');
                        $('.useMsg .zan').removeClass('hover');
                    } else {
                        hint('关注成功');
                        $('.useMsg .zan').html('已关注');
                        $('.useMsg .zan').addClass('hover');
                    }
                }
            });
        });
    }

    /**
     * 获取提问列表
     */
    function getQuestionList() {
        let ajaxData = {};
        ajaxData.pageNumber = 1;
        ajaxData.pageSize = 2;
        ajaxData.auctionId = productId;
        ajaxData.requestId = md5(JSON.stringify(ajaxData));
        ajaxData.timestamp = new Date().getTime();

        $.ajax({
            url: link + '/goods/questions',
            type: 'GET',
            data: ajaxData
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    $('.consult .title span').text(response.count);
                    $('.consult .title').append('<a href="questionList.html?productId=' + productId + '" class="more">查看更多</a>');

                    let result = '';
                    let list = response.data;
                    for (let i = 0; i < list.length; i++) {
                        result += '<li><p class="question">' + list[i].problem + '</p></li>'
                    }
                    $('.consult ul').html(result);
                }
            })
        });
    }

    /**
     * 获取推荐列表
     */
    function getRecommendList() {
        let ajaxData = {};
        ajaxData.pageNumber = 1;
        ajaxData.pageSize = 7;
        ajaxData.requestId = md5(JSON.stringify(ajaxData));
        ajaxData.timestamp = new Date().getTime();

        $.ajax({
            url: link + '/goods/auctions',
            type: 'GET',
            data: ajaxData
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    var pro;
                    let result = "";
                    let imageURL = '';
                    let pd = response.data;
                    for (let i = 0, j = 0; i < pd.length && j < pd.length - 1; i++) {
                        if (pd[i].auctionId === productId) continue;

                        j++;
                        if (pd[i].images) {
                            imageURL = pd[i].images.split(';')[0];
                        }

                        result += '<li>';
                        result += '    <a href="productDetail.html?productId=' + pd[i].auctionId + '">' + compressPicture(0, imageURL) + '</a>';
                        result += '    <p class="name">' + pd[i].title + '</p>';
                        result += '    <p class="price">￥<span>' + pd[i]['currentPrice'] + '</span></p>';
                        result += '</li>';
                    }
                    $(".recommend ul").html(result)
                }
            })
        });
    }

    /**
     * 获取出价记录
     */
    function getBiddingRecords() {
        let ajaxData = {};
        ajaxData.pageNumber = 1;
        ajaxData.pageSize = 6;
        ajaxData.auctionId = productId;
        ajaxData.requestId = md5(JSON.stringify(ajaxData));
        ajaxData.timestamp = new Date().getTime();

        $.ajax({
            url: link + '/order/biddingRecords',
            type: 'GET',
            data: ajaxData
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    if (response.count === 0) {
                        $(".part2").html('<p class="title">暂无出价记录</p>');
                        return;
                    }

                    let recordHTML = '';
                    let list = response.data;
                    for (let i = 0; i < list.length; i++) {
                        recordHTML += '<ul>';
                        recordHTML += '    <li>';
                        recordHTML += '        <div class="head">';
                        recordHTML += '            <img src="img/head.png" alt="">';
                        recordHTML += '        </div>';
                        recordHTML += '        <div class="use_box">';
                        recordHTML += '            <p class="name">' + list[i].userId.substring(0, 3) + '······' + list[i].userId.substring(list[i].userId.length - 5, list[i].userId.length - 1) + '</p>';
                        recordHTML += '            <div class="evaluateMsg">';
                        recordHTML += '                <p class="evaluateNum">评价 <span>' + list[i]['totalNumber'] + '</span></p>';
                        recordHTML += '                <p class="general">好评率 <span>' + list[i]['praiseRate'] + '</span>%</p>';
                        recordHTML += '            </div>';
                        recordHTML += '        </div>';
                        recordHTML += '        <p class="price">￥<span>' + list[i].biddingAmount + '</span></p>';
                        recordHTML += '    </li>';
                        recordHTML += '    <div class="time">';
                        recordHTML += '        <span>' + list[i]['biddingTime'] + '</span>';
                        recordHTML += '    </div>';
                        recordHTML += '</ul>';
                    }
                    $('.productData .part2').html(recordHTML);
                    /* if ($(".productData .part1").height() > $(".productData .part2").height()) {
                        $(".productData").css({'height': $(".productData .part1").height() + 150})
                    } else {
                        $(".productData").css({'height': $(".productData .part2").height() + 150})

                    } */

                }
            })
        });
    }

    /**
     * 显示出价框
     */
    function showPriceBox(selector) {
        // 禁止滑动
        toggleBody(1);

        // 检查保证金记录
        $.ajax({
            url: link + '/order/depositRecords/' + productId,
            type: 'GET',
            data: {
                requestId: md5(productId),
                timestamp: new Date().getTime()
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    let data = response.data;

                    // 未支付保证金
                    if ('UNPAID' === data['paymentStatus'] && earnestMoney > 0) return $(".addressWicket").show();

                    // 获取拍品详情
                    getAuctionDetails(false);

                    // 显示出价框
                    $(selector).fadeIn(300);
                }
            })
        });
    }

    /**
     * 减价
     */
    function priceReduction(selector) {
        // 获取输入框中的价格
        let inputPrice = $(selector).find('.price').val() || auctionData['currentPrice'];

        let biddingPrice = auctionData['currentPrice'] + auctionData.markupRange;

        if (parseInt(inputPrice) <= biddingPrice) {
            // 设置输入框
            $(selector).find('.price').val(biddingPrice);
            $(selector).find('.reduce').html('<img src="img/detail/reduce2.png" alt="">');
        } else {
            // 设置输入框
            $(selector).find('.price').val(parseInt(inputPrice) - auctionData.markupRange);
        }
    }

    /**
     * 加价
     */
    function priceMarkup(selector) {
        // 获取输入框中的价格
        let inputPrice = $(selector).find('.price').val();

        // 加价幅度
        inputPrice = parseInt(inputPrice) + auctionData.markupRange;

        // 是否大于一口价
        let buyoutPrice = auctionData.buyoutPrice || Number.MAX_VALUE;
        inputPrice = Math.min(inputPrice, buyoutPrice);

        // 设置输入框
        $(selector).find('.price').val(inputPrice);
        $(selector).find('.reduce').html('<img src="img/detail/reduce.png" alt="">');
    }

    /**
     * 提交价格
     * @param biddingType 类型
     */
    function submitPrice(biddingType) {
        // 一口价
        let buyoutPrice = auctionData.buyoutPrice || Number.MAX_VALUE;

        // 立即成交
        if ('PROMPTLY' === biddingType) {
            $(".hint_box2 .text").text("是否确认以一口价" + buyoutPrice + "元成交？");
            $(".hint_box2").fadeIn(200);

            biddingData.biddingType = 'IMMEDIATE';
            biddingData.biddingAmount = buyoutPrice;
            biddingData.biddingMessage = $('.oncePrice_box .txt').val();
            return;
        }

        // 立即价格
        let oncePrice = $(".oncePrice_box .range input").val();
        // 预约价格
        let makePrice = $(".makePrice_box .range input").val();
        // 出价类型
        biddingData.biddingType = biddingType;
        // 立即出价
        if ('IMMEDIATE' === biddingType) {
            if ('' === oncePrice) {
                hint("请输入价格");
                return false;
            }

            if (oncePrice > buyoutPrice) {
                biddingData.biddingAmount = buyoutPrice;

                $(".hint_box2 .text").text("您的出价已经达到一口价，是否确认以" + buyoutPrice + "元成交？");
                $(".hint_box2").fadeIn(200);
            } else {
                biddingData.biddingAmount = oncePrice;

                $(".hint_box2 .text").text("是否立即出价 " + oncePrice + " 元？");
                $(".hint_box2").fadeIn(200);
            }
        } else {
            if ('' === makePrice) {
                hint("请输入预约价格");
                return false;
            }

            if (makePrice > buyoutPrice) {
                biddingData.biddingAmount = buyoutPrice;

                $(".hint_box2 .text").text("您的预约价格超过了一口价，是否调整为" + buyoutPrice + "元？");
                $(".hint_box2").fadeIn(200);
            } else {
                biddingData.biddingAmount = makePrice;

                $(".hint_box2 .text").text("是否预约出价 " + makePrice + " 元？");
                $(".hint_box2").fadeIn(200);
            }
        }
    }

    /**
     * 出价
     */
    function ajaxBidding() {
        $.ajax({
            url: link + '/order/biddings',
            type: 'POST',
            data: biddingData
        }).done(function (response) {
            console.log(response);

            $(".hint_box2").hide();
            // 获取拍品详情
            getAuctionDetails(false);
            // 获取出价记录
            getBiddingRecords();

            handler({
                res: response,
                fun1: function () {
                    $(".oncePrice_box").hide();
                    $(".makePrice_box").hide();

                    $("#text_box .title").text("出价成功");
                    $("#text_box .txt").text("您可以在出价记录中查看出价");
                    $("#text_box").fadeIn(200);
                    toggleBody(1);
                }
            })
        });
    }

    /**
     * 更新拍品状态
     * @param auctionStatus 拍品状态
     */
    function updateAuctionStatus(auctionStatus) {
        $.ajax({
            url: link + '/goods/auctions/' + productId + '/auctionStatus',
            type: 'PUT',
            data: {
                requestId: md5('auctionId=' + productId + '&auctionStatus=' + auctionStatus),
                timestamp: new Date().getTime(),
                auctionStatus: auctionStatus
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    location.href = 'auction.html';
                }
            })
        })
    }

    $(".questionIco").click(function () {
        window.location.href = "quizManage.html?productId=" + productId;
    })
</script>


<script>
    //      关闭提示框
    $(".click").click(function () {
        $(this).parent().fadeOut(200);
        toggleBody(0)
    });
    $(".closebt").click(function () {
        $(this).parent().parent().fadeOut(200);
        toggleBody(0)
    });

    //提交地址信息验证
    function submitAddress() {

        $(".addressWicket").hide();
        $(".payment_box").show();
        /*if ($(".realname").val() == "") {
            alert("请填写姓名");
            return false;
        }

        if (!reg.test($('.mobile').val())) {
            alert("请输入正确的手机号码");
            return false;
        }

        if ($(".province").val() == "" || $(".province").val() == "省份") {
            alert("请选择省份");
            return false;
        }

        if ($(".city").val() == "" || $(".city").val() == "城市") {
            alert("请选择城市");
            return false;
        }

        if ($(".addr").val() == "") {
            alert("请填写地址");
            return false;
        }
        if ($(".deal .hover").length == 0) {
            alert("请同意拍卖协议");
            return false;
        }*/

    }

    //选择同意拍卖协议
    function consent(that) {
        if ($(that).hasClass("hover")) {
            $(that).removeClass("hover")
        } else {
            $(that).addClass("hover")
        }
    }

    function podlock() {
        $(".click").parent().hide(300);
        toggleBody(0)
    }


    $(window).scroll(function () {
        const top = $(window).scrollTop();
        if (top > 400) {
            $("#suspend_buttom .backTop").fadeIn(200);
        } else {
            $("#suspend_buttom .backTop").fadeOut(200);
        }
    });

    //回到顶部
    function backTop() {
        $("html,body").animate({
            scrollTop: 0
        }, 500);
    }

    $(".nav_title").on('click', 'li', function () {
        let index = $(this).index();
        $(".productData .part").hide();
        index = index + 1;
        $(".productData .part" + index).show();
        $(".nav_title li").removeClass("current");
        $(this).addClass("current")
    });

    $(".paymentSelect").on('click', 'li', function () {
        $(".paymentSelect li").removeClass("hover");
        $(this).addClass("hover");
        let index = $(this).index();
        console.log(index);
        if (index === 0) {
            $(".paymentbt .zfb").show();
            $(".paymentbt .wx").hide();
        } else {
            $(".paymentbt .zfb").hide();
            $(".paymentbt .wx").show();
        }
    });


    /**
     * 私信TA
     */
    function privateLetterTA() {
        localStorage.setItem('rong_target_name', usernames);
        location.href = 'messageChat.html?targetId=' + userId + '&targetType=1';
    }

    /* $(window).load(function(){
        if ($(".productData .part1").height() > $(".productData .part2").height()) {
            $(".productData").css({'height': $(".productData .part1").height() + 150})
        } else {
            $(".productData").css({'height': $(".productData .part2").height() + 150})

        }
    }); */
</script>
</body>

</html>
