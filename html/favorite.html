<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <meta content="width=device-width,target-densitydpi=device-dpi, user-scalable=0" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="true" name="HandheldFriendly"/>
    <meta content="yes" name="apple-touch-fullscreen"/>
    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            var version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                var phoneScale = parseInt(window.screen.width) / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <link href="css/style.css" rel="stylesheet">
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="js/touch-0.2.14.min.js" type="text/javascript"></script>
    <script src="js/common.js" type="text/javascript"></script>

    <script src="js/jquery.transit.min.js" type="text/javascript"></script>

    <script src="js/jquery.cookie.js" type="text/javascript"></script>

    <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>

</head>
<body>
<div id="favorite2">
    <div class="content">
        <div class="part1">
            <div class="img_bg">
                <div class="bg_img"><img src="img/favorite/bg_img.jpg"></div>
            </div>

            <div class="menubt"></div>
            <ul class="box" id="listImg">

                <!-- <li><img src="img/favorite/card.png"></li>
                <li><img src="img/favorite/card.png"></li>
                <li><img src="img/favorite/card.png"></li>
                <li><img src="img/favorite/card.png"></li>
                <li><img src="img/favorite/card.png"></li>
                <li><img src="img/favorite/card.png"></li>
                <li><img src="img/favorite/card.png"></li> -->
            </ul>
        </div>
    </div>
    <div class="menu_box" style="display: none;">
        <div class="click"></div>
        <div class="box" style="background: url('../img/favorite/menubg2.png') no-repeat;">
            <ul>
                <li onclick="window.location.href='myHome.html'"><img src="img/favorite/ico3.png">我的主页</li>
                <li onclick="window.location.href='favoriteList.html'"><img src="img/favorite/ico1.png">藏品管理</li>
                <!-- <li onclick="window.location.href='favoriteTemplate.html'"><img src="img/favorite/ico2.png">布置藏品柜</li> -->
            </ul>
        </div>
    </div>
</div>


<script src="js/common.js"></script>

<script>

    var cardType;

    shareMsg(); //分享


    $(".img_bg").height($(window).height());
    $(".part1").height($(window).height());
    var dataList = '';
    var userId = getQueryStringByName('userId');
    console.log(userId);
    if (userId) {
        $(".menubt").remove();
        $(".menu_box").remove();
        $('title').text('TA的美塑派')
    } else {
        $('title').text('美塑派')
    }
    $(".click").click(function () {
        $(this).parent().fadeOut(200)
    });
    $(".menubt").click(function () {
        $(".menu_box").fadeIn(200)
    });

    //      	var selectBg = $.cookie("selectBg");
    var selectColor = $.cookie("selectColor");
    var selectElment = $.cookie("selectElment");

    getBg();

    // 藏品柜获取单个帖子
    function getBg() {
        var paramObject = getParamObject();
        paramObject.userId = userId;
        paramObject.timestamp = new Date().getTime(); // 请求时间戳
        paramObject.requestId = md5($.param(paramObject)); // 请求ID
        $.ajax({
            url: link + "/social/cabinet/getCabinet?" + $.param(paramObject),
            dataType: "Json",
            async: false,
            success: function (res) {
                console.log(res);
                handler({
                    res: res,
                    fun1: function () {
                        let pd = res.data;
                        cardType = pd.cardType;
                        // $(".img_bg").attr("src",link + pd.image);
                        $.cookie("selectColor", pd.color, {expires: 365});
                        $.cookie("selectBg", pd.image, {expires: 365});
                        $.cookie("selectElment", pd.element, {expires: 365});
                        $("#listImg .elment").attr("src", "img/favorite/" + pd.element + ".png");
                        $(".ico").attr("src", 'img/favorite/' + pd.color + '/ico1.png');
                        $(".line").attr("src", 'img/favorite/' + pd.color + '/line.png');
                        $(".part1 .title").addClass(pd.color);
                        $(".part1 .ico_box").addClass(pd.color);

                        var str = '<img src="img/favorite/' + pd.color + '/circle7.png" class="rotate3">' +
                            '<img src="img/favorite/' + pd.color + '/circle3.png"	class="rotate1" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/circle6.png"	class="rotate2">' +
                            '<img src="img/favorite/' + pd.color + '/circle2.png"	class="rotate8" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/circle4.png" class="rotate4" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/circle5.png" class="rotate7">' +
                            '<img src="img/favorite/' + pd.color + '/circle1.png" class="rotate" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/gear1.png" class="rotate5">' +
                            '<img src="img/favorite/' + pd.color + '/gear2.png" class="rotate6">';
                        $(".cirle").html(str);
                    }
                })
            },
            error: function (e) {

            }
        });
    }

    getList();

    //获取藏品列表
    function getList() {
        var paramObject = getParamObject();
        paramObject.userId = userId; // 用户Id
        paramObject.siteType = 'SHOWING'; // 请求时间戳
        paramObject.timestamp = new Date().getTime(); // 请求时间戳
        paramObject.requestId = md5($.param(paramObject)); // 请求ID
        $.ajax({
            url: link + "/goods/treasure/getList?" + $.param(paramObject),
            dataType: "Json",
            async: false,
            success: function (res) {
                console.log(res);
                handler({
                    res: res,
                    fun1: function () {
                        var likeNumber = [0, 10, 20, 50, 100];
                        var cardNum = 0;
                        for (var i = 0; i < res.data.length; i++) {
                            let total;
                            var resultSrc = '';
                            var pd = res.data[i];

                            if (cardType == 'DEFAULT') {
                                total = parseInt(pd.citizenGood) + parseInt(pd.masterGood) + parseInt(pd.peopleGood);
                                for (var j = 0; j < likeNumber.length; j++) {
                                    if (total == 0) {
                                        cardNum = 1
                                    } else if (total <= likeNumber[j]) {
                                        cardNum = j;
                                        break;
                                    } else if (total > 100) {
                                        cardNum = 5
                                    }
                                }
                                resultSrc = link + '\\file\\resources\\cabinet\\card\\DEFAULT' + cardNum + '.png'
                            } else {
                                resultSrc = link + '\\file\\resources\\cabinet\\card\\' + cardType + '.png'
                            }


                            var imgArr = [];
                            if (Istrue(pd.images)) {
                                imgArr = pd.images.split(";");
                            }


                            if (pd.verticalImage) {
                                if (Istrue(pd.verticalImage)) {
                                    var imgList = pd.verticalImage.split('.');
                                }

                                $("#listImg").append('<li onclick="visiAddRecord(\'INTO\',\'' + pd.postId + '\')"><div class="img"><img  src="' + link + imgList[0] + '.thumbnail.' + imgList[1] + '" onerror="src=\'img/img_default.png\'"></div><div class="card"><img src=' + resultSrc + '></div></li>')
                            } else {
                                if (imgArr[0]) {
                                    var imgList = imgArr[0].split('.');
                                }

                                $("#listImg").append('<li onclick="visiAddRecord(\'INTO\',\'' + pd.postId + '\')"><div class="img"><img src="' + link + imgList[0] + '.thumbnail.' + imgList[1] + '" onerror="src=\'img/img_default.png\'"></div><div class="card"><img src=' + resultSrc + '></div></li>')
                            }


                        }
                    }
                })
            },
            error: function (e) {
            }
        });
    }


    /*
    function winLind(id){
        window.location.href="post_detail.html?postId="+id
    } */

</script>
</body>
</html>