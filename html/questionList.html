<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>卖家答疑</title>
    <meta content="width=device-width,target-densitydpi=device-dpi, user-scalable=0" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="true" name="HandheldFriendly"/>
    <meta content="yes" name="apple-touch-fullscreen"/>
    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            var version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                var phoneScale = parseInt(window.screen.width) / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <link href="css/style.css" rel="stylesheet">
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>


    <link href="mescroll/mescroll.min.css" rel="stylesheet"></link>
    <style type="text/css">


        /*列表*/
        .mescroll {
            position: fixed;
            top: 0px;
            bottom: 0px;
            height: auto;
        }

        /*回到顶部按钮*/
        .mescroll-totop {
            bottom: 70px;
        }

        /*展示上拉加载的数据列表*/
        .data-list {
            border-top: 4px solid #eee;
        }

        .data-list li {
            position: relative;
            padding: 10px 8px 10px 120px;
            border-bottom: 1px solid #eee;
        }

        .data-list .pd-img {
            position: absolute;
            left: 18px;
            top: 18px;
            width: 80px;
            height: 80px;
        }

        .data-list .pd-name {
            font-size: 16px;
            line-height: 20px;
            height: 40px;
            overflow: hidden;
        }

        .data-list .pd-price {
            margin-top: 8px;
            color: red;
        }

        .data-list .pd-sold {
            font-size: 12px;
            margin-top: 8px;
            color: gray;
        }
    </style>

</head>
<body>
<div id="question">

    <div id="content">


        <div class="mescroll" id="mescroll">
            <div id="dataList">

            </div>
        </div>
    </div>
</div>

<script src="js/common.js"></script>
<!--上拉加载文件-->
<script src="mescroll/mescroll.min.js"></script>
<script src="js/jquery.cookie.js" type="text/javascript"></script>
<script>
    shareMsg(); //分享


    var height = $(window).height();
    $("#content").height(height);
    var productId = getQueryStringByName("productId");
    var orderBy = "composite_index";
    var mescroll = new MeScroll("mescroll", {
        up: {
            callback: upCallback, //上拉回调,此处可简写; 相当于 callback: function (page) { getListData(page); }
            isBounce: false, //此处禁止ios回弹,解析(务必认真阅读,特别是最后一点): http://www.mescroll.com/qa.html#q10
            clearEmptyId: "dataList", //1.下拉刷新时会自动先清空此列表,再加入数据; 2.无任何数据时会在此列表自动提示空
            toTop: { //配置回到顶部按钮
                src: "../res/img/mescroll-totop.png", //默认滚动到1000px显示,可配置offset修改
                //offset : 1000
            },
            lazyLoad: {
                use: true // 是否开启懒加载,默认false
            }
        }
    });


    //上拉加载的回调 page = {num:1, size:10}; num:当前页 默认从1开始, size:每页数据条数,默认10
    function upCallback(page) {
        var pageNum = page.num; // 页码, 默认从1开始 如何修改从0开始 ?
        var pageSize = page.size; // 页长, 默认每页10条
        $.ajax({
            url: link + "/goods/questions",
            type: "GET",
            data: {
                requestId: 'd79b9efa995f',
                timestamp: new Date().getTime(),
                pageNumber: pageNum,
                pageSize: pageSize,
                auctionId: productId,
            },
            dataType: "Json",
            success: function (res) {
                console.log(res);
                var curPageData = res.data; // 接口返回的当前页数据列表
                var totalSize = res.count; // 接口返回的总数据量(比如列表有26个数据,每页10条,共3页; 则totalSize值为26)
                mescroll.endSuccess(curPageData.length);
                handler({
                    res: res, fun1: function () {
                        setListData(curPageData)
                    }
                })
            },
            error: function (e) {
                mescroll.endErr()
            }
        })
    }


    function setListData(curPageData) {
        var str = "";

        for (var i = 0; i < curPageData.length; i++) {
            var pd = curPageData[i];
            str += '<ul><li><img src="img/detail/ico_ask.png"><p>' + pd.problem + '</p></li>';
            if (pd.answer) {
                str += '<li><img src="img/detail/ico_answer.png"><p>' + pd.answer + '</p></li>'
            }
            str += '<div class="time">' +
                '<span>' + pd.createTime + '</span>' +
                '</div>' +
                '</ul>'
        }
//			listDom.innerHTML=str;
        $("#dataList").append(str)
//			$("#dataList ul:nth-child(1) li").append('<div class="zhongbiao"></div>')
    }

    var seller = $.cookie("seller");
    console.log(seller);
    if (seller == "false") {
        console.log(seller);
        $("#content").append('<a href="quiz.html?productId=' + productId + '" class="questionbt"><img src="img/detail/aq.png"/></a>')
    }


</script>
</body>
</html>