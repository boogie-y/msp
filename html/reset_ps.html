<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>重设密码</title>
    <meta content="width=device-width, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="true" name="HandheldFriendly"/>
    <meta content="yes" name="apple-touch-fullscreen">
    <link href="css/style.css" rel="stylesheet">
    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            let version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                let phoneScale = window.screen.width / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
</head>
<body>
<div id="reset">
    <!--验证码登录输入框-->
    <div class="login_box" style="margin-top: 40px;">

        <div class="input_box password">
            <label for="password"></label>
            <input class="use_ps" id="password" maxlength="20"
                   onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[\W]/g,''))"
                   onkeyup="value=value.replace(/[\W]/g,'')"
                   placeholder="请输入密码(至少为6个字符的英文、数字或符号)"
                   type="password"/>
            <p>密码为至少6个字符的英文字母、数字</p>
        </div>

        <!--密码-->
        <div class="input_box password">
            <label for="confirm_password"></label>
            <input class="use_ps" id="confirm_password" maxlength="20"
                   onbeforepaste="clipboardData.setData('text',clipboardData.getData('text').replace(/[\W]/g,''))"
                   onkeyup="value=value.replace(/[\W]/g,'')"
                   placeholder="请再次输入密码"
                   type="password"/>
            <p>密码为至少6个字符的英文字母、数字</p>
        </div>

    </div>

    <button class="submitbt submitbt1" onclick="resetPassword();" type="submit">确认重设密码</button>

    <div class="hint_box">
        <p></p>
    </div>
</div>

<script src="js/common.js" type="text/javascript"></script>
<script type="text/javascript">
    shareMsg(); //分享


    /**
     * 检查密码
     */
    $(".password input").on("blur", function () {
        let length = $(this).val().length;
        if (length < 6) {
            $(this).next().fadeIn(300);
            setTimeout(function () {
                $(".password p").fadeOut(300)
            }, 2000)
        }
    });

    // 请求参数
    let password, confirmPassword;

    /**
     * 重置密码
     */
    function resetPassword() {
        // 检查请求参数
        if (!checkRequestParameters()) return;

        $.ajax({
            url: link + '/resetPassword',
            type: 'POST',
            data: {
                password: password,
                confirmPassword: confirmPassword,
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    location.href = '/';
                }
            })
        })
    }

    /**
     * 检查请求参数
     *
     * @return {boolean}
     */
    function checkRequestParameters() {
        password = $('#password').val(); // 密码
        confirmPassword = $('#confirm_password').val(); // 确认密码

        if (password === '') {
            hint('请输入密码');
            return false;
        }
        if (password.length < 6) {
            hint('密码为至少6个字符的英文字母、数字');
            return false;
        }
        if (password !== confirmPassword) {
            hint('两次输入的密码不一致');
            return false;
        }
        return true;
    }
</script>
</body>
</html>