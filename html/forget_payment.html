<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>忘记密码</title>
    <meta content="width=device-width, user-scalable=0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="true" name="HandheldFriendly">
    <meta content="yes" name="apple-touch-fullscreen">
    <link href="css/style.css" rel="stylesheet">
    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            let version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                let phoneScale = window.screen.width / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
</head>
<body>
<div id="forget">
    <!--验证码登录输入框-->
    <div class="login_box" style="margin-top: 40px;">
        <!--手机号码-->
        <div class="input_box">
            <label for="mobile"></label>
            <input class="mobile" id="mobile" maxlength="11" onkeyup="this.value=this.value.replace(/[^\d]/g,'')"
                   placeholder="请输入手机号" style="border: none;"
                   type="tel">
        </div>

        <!--手机验证码-->
        <div class="input_box">
            <label for="sms_code"></label>
            <input class="code" id="sms_code" maxlength="6" placeholder="请输入短信验证码" type="text">
            <button class="send send_code" onclick="sendSmsCode('verify', null);" type="button">发送验证码</button>
        </div>
    </div>

    <button class="submitbt submitbt1" onclick="verifyMobile();" type="submit">下一步</button>

    <div class="hint_box">
        <p></p>
    </div>
</div>

<script src="js/common.js" type="text/javascript"></script>
<script type="text/javascript">
    shareMsg(); //分享


    // 请求参数
    let mobile, smsCode;

    /**
     * 验证手机
     */
    function verifyMobile() {
        // 检查请求参数
        if (!checkRequestParameters()) return;

        $.ajax({
            url: link + '/verifyMobile',
            type: 'POST',
            data: {
                mobile: mobile,
                smsCode: smsCode
            }
        }).done(function (response) {
            console.log(response);

            handler({
                res: response,
                fun1: function () {
                    // 跳转重置密码页面
                    location.href = 'reset_ps.html';
                }
            });
        });
    }

    /**
     * 检查请求参数
     *
     * @return {boolean}
     */
    function checkRequestParameters() {
        mobile = $('#mobile').val();  // 手机号
        smsCode = $('#sms_code').val(); // 短信验证码

        // 手机验证码验证
        if (mobile === '') {
            hint('请输入手机号');
            return false;
        }
        if (!reg.test(mobile)) {
            hint('手机号格式错误');
            return false;
        }
        if (smsCode === '') {
            hint('请输入短信验证码');
            return false;
        }
        return true;
    }
</script>
</body>
</html>