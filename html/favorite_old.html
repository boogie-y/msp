<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title></title>
    <meta content="width=device-width,target-densitydpi=device-dpi, user-scalable=0" name="viewport"/>
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="true" name="HandheldFriendly"/>
    <meta content="yes" name="apple-touch-fullscreen"/>
    <meta content="模型APP内测招募" property="title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="image"/>

    <meta content="模型APP内测招募" property="og:title"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:description"/>
    <meta content="最强最走心的模型APP登场！去模型圈大佬面对面交流，晒单拍卖无缝连接。" property="og:keywords"/>
    <meta content="https://www.2501p.com/img/share_logo.jpg" property="og:image"/>
    <script type="text/javascript">
        if (/Android (\d+\.\d+)/.test(navigator.userAgent)) {
            var version = parseFloat(RegExp.$1);
            if (version > 2.3) {
                var phoneScale = parseInt(window.screen.width) / 750;
                document.write('<meta name="viewport" content="width=750, minimum-scale = ' + phoneScale + ', maximum-scale = ' + phoneScale + ', target-densitydpi=device-dpi">');
            } else {
                document.write('<meta name="viewport" content="width=, target-densitydpi=device-dpi">');
            }
        } else {
            document.write('<meta name="viewport" content="width=750, user-scalable=no">');
        }
    </script>
    <link href="css/style.css" rel="stylesheet">
    <script src="js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="js/touch-0.2.14.min.js" type="text/javascript"></script>
    <script src="js/common.js" type="text/javascript"></script>

    <script src="js/jquery.transit.min.js" type="text/javascript"></script>

    <script src="js/jquery.cookie.js" type="text/javascript"></script>

    <script src="https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js"></script>

</head>
<body>
<div id="favorite">
    <div class="content">
        <div class="part1">
            <img class="img_bg" src="img/favorite/bg1.jpg">
            <div class="menubt"></div>
            <!--<a href="favoriteImg.html" class="img_link"></a>-->
            <a class="detail_link" href="favoriteDetail.html"></a>
            <h1 class="title">暂无藏品</h1>
            <div class="ico_box" style="display: none;">
                <img class="ico" src="img/favorite/RED/ico1.png">
                <img class="line" src="img/favorite/RED/line.png">
                <span class="num1">0</span>
                <span class="num2">0</span>
                <span class="num3">0</span>
                <!--<div class="img"><img src="img/favorite/index_ico3.png"></div>-->
            </div>
            <div class="light"></div>
            <div class="img_big"><img src="img/favorite/img_big.png"></div>
            <div class="cirle">
                <img class="rotate3" src="img/favorite/PURPLE/circle7.png">
                <img class="rotate1" src="img/favorite/PURPLE/circle3.png" style="top:-20px">
                <img class="rotate2" src="img/favorite/PURPLE/circle6.png">
                <img class="rotate8" src="img/favorite/PURPLE/circle2.png" style="top:-20px">
                <img class="rotate4" src="img/favorite/PURPLE/circle4.png" style="top:-20px">
                <img class="rotate7" src="img/favorite/PURPLE/circle5.png">
                <img class="rotate" src="img/favorite/PURPLE/circle1.png" style="top:-20px">
                <img class="rotate5" src="img/favorite/PURPLE/gear1.png">
                <img class="rotate6" src="img/favorite/PURPLE/gear2.png">
            </div>
            <ul id="listImg">
                <li class="li7" date="8">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
                <li class="li0" date="1">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png" style="opacity: 1;"></li>
                <li class="li1" date="2">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
                <li class="li2" date="3">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
                <li class="li3" date="4">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
                <li class="li4" date="5">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
                <li class="li5" date="6">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
                <li class="li6" date="7">
                    <div class="img"><img src="img/favorite/img_big.png"></div>
                    <img class="elment" src="img/favorite/elmen1.png"></li>
            </ul>
        </div>
    </div>
    <div class="menu_box" style="display: none;">
        <div class="click"></div>
        <div class="box">
            <ul>
                <li onclick="window.location.href='myHome.html'"><img src="img/favorite/ico3.png">我的主页</li>
                <li onclick="window.location.href='favoriteList.html'"><img src="img/favorite/ico1.png">藏品管理</li>
                <li onclick="window.location.href='favoriteTemplate.html'"><img src="img/favorite/ico2.png">布置藏品柜</li>
            </ul>
        </div>
    </div>
</div>


<script src="js/common.js"></script>

<script>
    $(".img_bg").height($(window).height());
    $(".part1").height($(window).height());
    var dataList = '';
    var userId = getQueryStringByName('userId');
    console.log(userId);
    if (userId) {
        $(".menubt").remove();
        $(".menu_box").remove();
        $('title').text('TA的美塑派')
    } else {
        $('title').text('美塑派')
    }
    $(".click").click(function () {
        $(this).parent().fadeOut(200)
    });
    $(".menubt").click(function () {
        $(".menu_box").fadeIn(200)
    });

    //      	var selectBg = $.cookie("selectBg");
    var selectColor = $.cookie("selectColor");
    var selectElment = $.cookie("selectElment");

    getBg();

    // 藏品柜获取单个帖子
    function getBg() {
        var paramObject = getParamObject();
        paramObject.userId = userId;
        paramObject.timestamp = new Date().getTime(); // 请求时间戳
        paramObject.requestId = md5($.param(paramObject)); // 请求ID
        $.ajax({
            url: link + "/social/cabinet/getCabinet?" + $.param(paramObject),
            dataType: "Json",
            success: function (res) {
                console.log(res);
                handler({
                    res: res,
                    fun1: function () {
                        let pd = res.data;
                        $(".img_bg").attr("src", link + pd.image);
                        $.cookie("selectColor", pd.color, {expires: 365});
                        $.cookie("selectBg", pd.image, {expires: 365});
                        $.cookie("selectElment", pd.element, {expires: 365});
                        $("#listImg .elment").attr("src", "img/favorite/" + pd.element + ".png");
                        $(".ico").attr("src", 'img/favorite/' + pd.color + '/ico1.png');
                        $(".line").attr("src", 'img/favorite/' + pd.color + '/line.png');
                        $(".part1 .title").addClass(pd.color);
                        $(".part1 .ico_box").addClass(pd.color);

                        var str = '<img src="img/favorite/' + pd.color + '/circle7.png" class="rotate3">' +
                            '<img src="img/favorite/' + pd.color + '/circle3.png"	class="rotate1" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/circle6.png"	class="rotate2">' +
                            '<img src="img/favorite/' + pd.color + '/circle2.png"	class="rotate8" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/circle4.png" class="rotate4" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/circle5.png" class="rotate7">' +
                            '<img src="img/favorite/' + pd.color + '/circle1.png" class="rotate" style="top:-20px">' +
                            '<img src="img/favorite/' + pd.color + '/gear1.png" class="rotate5">' +
                            '<img src="img/favorite/' + pd.color + '/gear2.png" class="rotate6">';
                        $(".cirle").html(str);
                    }
                })
            },
            error: function (e) {

            }
        });
    }

    getList();

    //获取藏品列表
    function getList() {
        var paramObject = getParamObject();
        paramObject.userId = userId; // 用户Id
        paramObject.siteType = 'SHOWING'; // 请求时间戳
        paramObject.timestamp = new Date().getTime(); // 请求时间戳
        paramObject.requestId = md5($.param(paramObject)); // 请求ID
        $.ajax({
            url: link + "/goods/treasure/getList?" + $.param(paramObject),
            dataType: "Json",
            success: function (res) {
                console.log(res);
                handler({
                    res: res,
                    fun1: function () {
                        var pd = res.data;
                        for (var i = 0; i < pd.length; i++) {
                            var imgArr = [];
                            imgArr = pd[i].images.split(";");

                            $("#listImg .li" + i + " .img img").attr('src', link + imgArr[0])

                        }
                        dataList = res.data;
                        console.log(dataList);
                        if (dataList.length > 0) {

                            replaceData(dataList[0])
                        }

                    }
                })
            },
            error: function (e) {

            }
        });
    }

    function replaceData(dataReplace) {
        var imgArr2 = dataReplace.images.split(";");
        $(".ico_box").show();
        $(".img_big img").attr("src", link + imgArr2[0]);
        $(".img_big").attr("data_post", dataReplace.postId);
        $(".ico_box .num1").text(dataReplace.masterGood);
        $(".ico_box .num2").text(dataReplace.citizenGood);
        $(".ico_box .num3").text(dataReplace.peopleGood);
        $(".title ").text(dataReplace.title);
    }


    var sliderTimer;
    $(function () {
        posterAction();

    });

    function reSlider() {
//				if(sliderTimer){clearInterval(sliderTimer);}
//				sliderTimer = setInterval(function(){
//					posterLeft();
//				},3000);
    }

    var isanimate1 = false, current = 2;
    var idList = [8, 1, 2, 3, 4, 5, 6, 7];
    var locList = [[6, 192, 0.8, 0.5], [66, 310, 0.8, 1], [280, 363, 1, 1], [500, 310, 0.8, 1], [562, 192, 0.8, 0.7], [500, 70, 0.7, 0.7], [304, 7, 0.5, 0.5], [83, 70, 0.7, 0.7]];

    function posterAction() {
        $("#listImg").bind("swiperight", function () {
            if (isanimate1) {
                return false;
            }
            isanimate1 = true;
            posterRight();
            reSlider();
        });

        $("#listImg").bind("swipeleft", function () {
            if (isanimate1) {
                return false;
            }
            isanimate1 = true;
            posterLeft();
            reSlider();
        });

        for (var i = 0; i < idList.length; i++) {
            var id = idList[i];
            var prop = locList[i];
            $("#listImg li:nth-child(" + id + ")").css({
                left: prop[0],
                top: prop[1],
                scale: prop[2],
                "opacity": prop[3]
            });
        }

    }

    function posterLeft() {
        posterStep(1);
    }

    function posterRight() {
        posterStep(-1);
    }

    function posterStep(step) {

        current += step;
        if (current < 1) {
            current = 8;
        } else if (current > 8) {
            current = 1;
        }

        idList[2] = current;
        idList[1] = current - 1;
        if (idList[1] < 1) {
            idList[1] = 8;
        }
        idList[0] = idList[1] - 1;
        if (idList[0] < 1) {
            idList[0] = 8;
        }


        idList[3] = current + 1;
        if (idList[3] > 8) {
            idList[3] = 1;
        }
        idList[4] = idList[3] + 1;
        if (idList[4] > 8) {
            idList[4] = 1;
        }

        for (var s = 5; s < 8; s++) {
            idList[s] = idList[s - 1] + 1;
            if (idList[s] > 8) {
                idList[s] = 1;
            }
        }


        for (var i = 0; i < idList.length; i++) {
            var id = idList[i];
            var prop = locList[i];
//					console.log(idList)
            var num = '';
            if (i == 2) {
                $("#listImg li:nth-child(" + id + ")").transition({
                    left: prop[0],
                    top: prop[1],
                    scale: prop[2],
                    "opacity": prop[3]
                }, 500, function () {
                    isanimate1 = false;
                });
                $("#listImg li:nth-child(" + id + ") .elment").transition({opacity: 1}, 500);
                console.log(i, prop, id);

                num = id - 2;
                if (num < 0) {
                    num = 7
                }
                console.log(num);
                if (dataList.length >= num + 1) {
                    replaceData(dataList[num])
                } else {
                    $(".ico_box").hide();
                    $(".img_big img").attr("src", 'img/favorite/img_big.png');
                    $(".img_big").attr("data_post", '');
                    $(".title ").text('暂无藏品')
                }

            } else {
                if (prop[2] == 1 || prop[0] == 280) {
                    console.log(333333);
                    $("#listImg li:nth-child(" + id + ")").transition({
                        left: prop[0],
                        top: prop[1],
                        scale: prop[2],
                        "opacity": prop[3]
                    }, 500);
                    $("#listImg li:nth-child(" + id + ") .elment").transition({opacity: 0}, 500);

                } else {
                    console.log(222222);
                    $("#listImg li:nth-child(" + id + ")").transition({
                        left: prop[0],
                        top: prop[1],
                        scale: prop[2],
                        "opacity": prop[3]
                    }, 500);
                    $("#listImg li:nth-child(" + id + ") .elment").css({opacity: 0});
                }
            }

//						

        }

    }


    $(".img_big").click(function () {
        var id = $(this).attr("data_post");
        if (id) {
            window.location.href = "post_detail.html?postId=" + id
        }

    })


    /*var slideProgressList = [];
    var slides = $("#listImg li");
    for (var i = 0; i < slides.length; i++) {
        console.log(11111)
        var slide = slides.eq(i);
        var slideProgress = slide.data('id');
        slideProgressList.push(slideProgress);
        console.log(slideProgressList)
        modify = 1;
        if (Math.abs(slideProgress) > 1) {
            modify = (Math.abs(slideProgress) - 1) * 0.2 + 1;
        }
        console.log(modify)
        translate = slideProgress * 60 ;
        if(translate > 0){
            translateY = -translate
        }else{
            translateY=translate;
        }
        scale = 1 - Math.abs(slideProgress) / 2;
        zIndex = 999 - Math.abs(Math.round(10 * slideProgress));
        console.log(translate,scale)
//				slide.transform('translateX(' + translate + ') scale(' + scale + ')');
//				$("#listImg").style.transform = 'translateX(' + translate + ') scale(' + scale + ')';
        slide.css({'transform':'translate(' + translate + 'px,'+translateY+'px) scale(' + scale + ')'})
        slide.css('zIndex', zIndex);
        slide.css('opacity', 1);
    }*/


</script>
</body>
</html>